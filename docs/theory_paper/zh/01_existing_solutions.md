# 1 现有解决方案分析

我们首先审视现有的密码管理解决方案，它们相比于之前的方案的优势与不改进就无法解决的不足之处：

- # 1.1 使用人脑记忆的密码,
  - ## 1.1.1 **优势**
    简单方便
  - ## 1.1.2 **缺陷**
    由于大多数人记忆力并不是天才级别, 以及人类天生的好逸恶劳的人性, 大概率会出现以下问题:

    - ### a. 使用的密码随机熵不够(密码过于简单)

      <details markdown='1'><summary>单击以展开攻击方式</summary>
          容易被字典攻击以及穷举法暴力攻击成功
      </details>

    - ### b. 虽然能记住随机熵足够的密码, 但无法记忆多个。（多个Apps重复使用相同密码）。 如果其中某个App被攻破, 且该App
      - #### 1. 没有加盐哈希存储密码
      - #### 2. 选择了弱哈希算法或salt生成存在问题
      - #### 3. 有加盐哈希存储密码, 但并没有在客户端实施, 那么未加盐密码可以在解密后的数据包中获得, 其他Apps的登录凭证也都会被攻击者获得


- # 1.2 **非开源密码管理器**（如Google、Apple、Samsung、1Password）：
  - ## 1.2.1 **优势**：简单易用
    只需要记住一个密码即可自动生成/填入信息熵足够的大量密码, 而且大多可以自动同步。
  - ## 1.2.2 **缺陷**：
    - ### a. 商业公司可能出卖客户的隐私(用户名)甚至明文密码, 因为很多非开源密码管理器并没有被设计成"软件提供者即使想, 也**完全**没有出卖用户的能力"
    - ### b. 公司内部可能出现内鬼(商业间谍/本国或敌国政府的卧底)去尝试攻击用户
    - ### c. 软件安全性只能由少数人或安全公司审计, 而不是全网公开所有人都可以审计
    - ### d. 同样具有开源密码管理器面临的几乎所有问题

- # 1.3 **开源或半开源密码管理器**（如pass/passage、KeePass系、Bitwarden）：
  - ## 1.3.1 **优势**：
    透明度高，社区支持强，安全性审计容易进行。
  - ## 1.3.2 **缺陷**：
    - ### a. 仍然存在单点故障风险，主要依赖于主密码的安全性。
    比如用户如果在被入侵成功的设备上输入主密码解锁密码数据库,
    攻击者可以通过记录键盘或内存读取等方式获得主密码以及数据库内所有信息,
    而这一点在目前就算使用硬件密钥来作为2FA解锁密码数据库也无法解决;

- # 1.4 **硬件密钥**（FIDO2）：
  - ## 1.4.1 **优势**：
    - ### a. 专业硬件密钥通常比个人设备更安全，因为它们不会安装第三方软件，攻击面较小
    - ### b. 设计上投入了不少资源在安全方面, 一般被认为不太可能能够被在线破解(获得内部的私钥)
    - ### c. 即使攻击者控制了用户的设备(电脑/手机)，大概率也只能获得少数平台的短期登录凭证。
  - ## 1.4.2 **缺陷**：

    - ### a. **FIDO2实施不完善**：目前支持FIDO2的应用屈指可数，且部分平台（如Apple和三星）限制了硬件密钥的品牌。另外，一些APPs例如ProtonMail仅支持将FIDO2作为双因素认证（2FA）手段，而不能完全替代密码。我们需要在FIDO2大规模普及(并且能够选择只使用FIDO2, 不需要在注册时设置密码)之前为目前这个过渡时期找到一个解决方案

    - ### b. **部分"硬件密钥"会单点故障**: Apple和Google虽然支持passkey, 但icloud账号或google账号一旦被控制, passkey便有可能能够被攻击者随意使用

    - ### c. **缺乏屏幕甚至按钮**：许多硬件密钥设备没有屏幕甚至按钮，用户无法确认自己正在批准的操作。比如:
      - #### 1. 攻击者可以在用户自己登录A平台时，同时发起对B平台的FIDO2请求，用户可能在不知情的情况下批准了攻击者希望的另外的操作。
      - #### 2. 再比如，用户以为自己在解密一个不太重要的信息（比如朋友使用自己的公钥加密后发送给自己的电子邮件），但实际上攻击者同时发起了对密码管理器数据库的解密请求。

    - ### d. **备份问题**：硬件密钥的备份机制存在缺陷。例如:
      - ####  1. Google和apple将手机/电脑作为硬件密钥，但其备份依赖于App账号的访问权限，存在与密码管理器相同的单点故障风险, 在系统级的防护上也大概率不如专业硬件密钥
      - ####  2. YubiKey等设备需要用户购买多个硬件密钥并才能复制私钥，这可能在备份设备老化或因自然灾害（如火灾、洪水、地震）损坏后失去私钥。 



# 这些分析为我们提出新的方案提供了必要的背景和对比。在下一章节, 我将阐述我目前找到的最佳方案(但不是完美方案)

| [下一页](02_proposed_solution.md) |
|----------------------------------|
